# Чек-лист для прохождения модерации Max

## Общая информация о боте

**Название:** HabitMax  
**Описание:** Помощник для формирования привычек и напоминаний о приёме лекарств. Не использует ИИ для генерации медицинских советов.  
**Категория:** Здоровье и фитнес / Утилиты  

## Требования к чат-ботам

### ✅ Функциональность

- [x] Бот отвечает на все команды из меню
- [x] Есть команда /start для начала работы
- [x] Есть команда /help с описанием функций
- [x] Обработка ошибок без падения
- [x] Корректная работа с вебхуками
- [x] Rate limiting (28 RPS с буфером)

### ✅ Безопасность

- [x] Валидация всех входных данных
- [x] Проверка payload кнопок (≤128 символов)
- [x] HTTPS для вебхука
- [x] Токен хранится в переменных окружения
- [x] Нет логирования чувствительных данных
- [x] Защита от SQL-инъекций (параметризованные запросы)

### ✅ Пользовательский опыт

- [x] Понятный онбординг
- [x] Интуитивное меню
- [x] Быстрый отклик (< 3 сек)
- [x] Обработка ошибок с понятными сообщениями
- [x] Возможность отписаться (/delete)

### ✅ Соответствие правилам

- [x] Нет спама
- [x] Нет навязчивой рекламы
- [x] Нет запрещенного контента
- [x] Нет мошенничества
- [x] Нет сбора лишних данных

## Мини-приложение

### ✅ Требования к UI

- [x] Использование @maxhub/max-ui
- [x] Адаптивный дизайн
- [x] Поддержка светлой/темной темы
- [x] Bottom navigation (5 вкладок)
- [x] Корректная работа в WebView

### ✅ Функциональность

- [x] Авторизация через deeplink
- [x] JWT токены
- [x] Работа офлайн (кэширование)
- [x] Обработка ошибок сети

## Документы для модерации

### 1. Описание бота

```
HabitMax — ваш персональный помощник для формирования полезных привычек 
и контроля приёма лекарств.

Основные функции:
• Напоминания о приёме лекарств с гибким расписанием
• Отслеживание полезных привычек (вода, спорт, чтение)
• Ежедневный планер важных дел
• Система достижений и уровней
• Детальная статистика выполнения
• Мини-приложение для удобного управления

Особенности:
✓ Не использует ИИ для медицинских советов
✓ Тихие часы — не беспокоим во время сна
✓ Эскалация напоминаний для важных рутин
✓ Экспорт данных (GDPR-compliant)

Подходит для:
• Людей, принимающих лекарства по расписанию
• Тех, кто хочет выработать полезные привычки
• Планирования ежедневных дел
```

### 2. Скриншоты

Необходимо подготовить:

1. **Экран приветствия** - онбординг нового пользователя
2. **Главный экран** - список рутин на сегодня
3. **Календарь** - heatmap выполнения
4. **Статистика** - графики и прогресс
5. **Достижения** - бейджи и награды
6. **Настройки** - timezone, тихие часы
7. **Добавление рутины** - визард создания

### 3. Политика конфиденциальности

См. `privacy-policy.md`

## Технические требования

### API интеграция

```javascript
// Endpoint вебхука
POST https://api.habitmax.ru/webhook

// Установка вебхука
POST https://platform-api.max.ru/subscriptions
{
  "url": "https://api.habitmax.ru/webhook",
  "events": ["message", "callback_query"]
}
```

### Ограничения

| Параметр | Значение | Реализация |
|----------|----------|------------|
| Rate Limit | 30 RPS | Bottleneck (28 RPS) |
| Payload | ≤128 символов | Валидация + обрезка |
| Buttons per row | ≤7 | Форматирование |
| Total buttons | ≤210 | Разбиение на страницы |

## Проверка перед подачей

### Функциональные тесты

```bash
# Проверка команд
curl -X POST https://api.habitmax.ru/webhook \
  -H "Content-Type: application/json" \
  -d '{"message": {"text": "/start", "from": {"id": 123}}}'

# Проверка callback
curl -X POST https://api.habitmax.ru/webhook \
  -H "Content-Type: application/json" \
  -d '{"callback_query": {"data": "menu|today", "from": {"id": 123}}}'
```

### Health check

```bash
curl https://api.habitmax.ru/health
```

Ожидаемый ответ:
```json
{
  "status": "healthy",
  "services": {
    "database": "connected",
    "redis": "connected"
  }
}
```

## Контакты для модерации

- **Email:** moderation@habitmax.ru
- **Телефон:** +7 (XXX) XXX-XX-XX
- **Ответственный:** [Имя Фамилия]

## Примечания для модератора

1. Бот не предоставляет медицинские консультации
2. Все напоминания носят информационный характер
3. Пользователь самостоятельно несет ответственность за прием лекарств
4. Данные хранятся на серверах в РФ (Yandex Cloud / Selectel)
5. Полное соответствие 152-ФЗ и GDPR
